{
	debug

	log default {
		output file /var/log/caddy/caddy_main.log {
			roll_size 10MiB
			roll_keep 5
			roll_keep_for 14d
		}
		format json
		level INFO
	}

	log out {
		output stdout
		format json
		level debug
	}

	metrics
	admin :2019
}

:80 {
	handle /metrics {
		metrics
	}
	handle /api/* {
		reverse_proxy main:8000
	}
	handle /docs {
		reverse_proxy main:8000
	}
	handle /docs/openapi.json {
		reverse_proxy main:8000
	}

	handle /* {
		reverse_proxy frontend:80
	}
}
